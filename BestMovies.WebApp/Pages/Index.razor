@page "/"
@page "/movies"

@using BestMovies.WebApp.Repositories
@using BestMovies.WebApp.Components
@using BestMovies.Shared.Dtos.Movies

<PageTitle>Movies</PageTitle>

<MudContainer Class="d-flex flex-column gap-4 justify-center pa-4" MaxWidth="MaxWidth.ExtraExtraLarge">
    <MovieCardList Title="Popular now" Movies="_popularMovies" SkeletonCardsCount="5" />
</MudContainer>

@code {
    [Inject]
    protected IMoviesRepository MoviesRepository { get; set; } = default!;

    private IEnumerable<SearchMovieDto>? _popularMovies;
    
    protected override async Task OnInitializedAsync()
    {
        _popularMovies = await MoviesRepository.GetPopularMovies();
        StateHasChanged();
    }
}