@using BestMovies.Shared.Dtos.Movies
@using BestMovies.WebApp.Repositories

<MudCard Outlined="true">
    <div style="position: relative">
        <MudSkeleton SkeletonType="SkeletonType.Rectangle" Animation="Animation.Wave" Height="@Height" Width="@Width"/>

        @if (Movie is not null)
        { 
            <MudPaper Style="position: absolute; bottom: 5px; left: 5px; right: 5px;">
                <div class="d-flex flex-column justify-space-between">
                    <div class="d-flex flex-row align-start justify-space-between pa-2">
                        <MudText Typo="Typo.h6" Align="Align.Start">@Movie.Title</MudText>
                        <MudIcon Color="Color.Dark" Icon="@Icons.Material.Filled.KeyboardArrowUp"/>
                    </div>
        
                    <div class="d-flex flex-row flex-wrap gap-2 justify-center px-4 pb-2" style="overflow-x: hidden;">
                        @foreach (var genre in Movie.Genres.Take(3))
                        {
                            <MudText Typo="Typo.subtitle2">@genre</MudText>
                        }
                    </div>
                </div>
            </MudPaper>
        }
    </div>
</MudCard>


@code {

    [Parameter]
    public string Height { get; set; } = "12rem";
    
    [Parameter]
    public string Width { get; set; } = "20rem";
    
    [Parameter]
    public SearchMovieDto? Movie { get; set; }
}